<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.98.0-DEV" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Non-Go Prototyping :: gokrazy</title>

    
    <link href="/css/nucleus.css?1650998234" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1650998234" rel="stylesheet">
    <link href="/css/hybrid.css?1650998234" rel="stylesheet">
    <link href="/css/featherlight.min.css?1650998234" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1650998234" rel="stylesheet">
    <link href="/css/auto-complete.css?1650998234" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1650998234" rel="stylesheet">
    <link href="/css/theme.css?1650998234" rel="stylesheet">
    <link href="/css/tabs.css?1650998234" rel="stylesheet">
    <link href="/css/hugo-theme.css?1650998234" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1650998234"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/development/non-go/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/logo.svg" width="100%" alt="gokrazy logo" title="gokrazy logo">

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1650998234"></script>
<script type="text/javascript" src="/js/auto-complete.js?1650998234"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/gokrazy.org\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1650998234"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/quickstart/" title="Quickstart" class="dd-item
        
        
        
        ">
      <a href="/quickstart/">
          <b>1. </b>Quickstart
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/platforms/" title="Supported platforms" class="dd-item
        
        
        
        ">
      <a href="/platforms/">
          <b>2. </b>Supported platforms
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/userguide/" title="Configuration" class="dd-item
        
        
        
        ">
      <a href="/userguide/">
          <b>3. </b>Configuration
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/userguide/package-config/" title="Package config: flags, environment variables, extra files" class="dd-item ">
        <a href="/userguide/package-config/">
        Flags, environment variables, …
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/userguide/remotesyslog/" title="Remote Syslog: sending gokrazy logs over the network" class="dd-item ">
        <a href="/userguide/remotesyslog/">
        Remote Syslog
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/userguide/tls-for-untrusted-networks/" title="Using TLS in untrusted networks" class="dd-item ">
        <a href="/userguide/tls-for-untrusted-networks/">
        Using TLS in untrusted networks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/userguide/wifi/" title="Connecting to WiFi networks" class="dd-item ">
        <a href="/userguide/wifi/">
        Connecting to WiFi
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/userguide/bluetooth/" title="Using Bluetooth" class="dd-item ">
        <a href="/userguide/bluetooth/">
        Using Bluetooth
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/userguide/permanent-data/" title="Access permanent data" class="dd-item ">
        <a href="/userguide/permanent-data/">
        Access permanent data
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/userguide/rsync-backups/" title="Permanent data backup with the gokrazy rsyncd" class="dd-item ">
        <a href="/userguide/rsync-backups/">
        Data backup with rsync
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/packages/" title="Available packages" class="dd-item
        
        
        
        ">
      <a href="/packages/">
          <b>4. </b>Available packages
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/packages/showcase/" title="Showcase" class="dd-item ">
        <a href="/packages/showcase/">
        Showcase
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/packages/tailscale/" title="Tailscale VPN" class="dd-item ">
        <a href="/packages/tailscale/">
        Tailscale VPN
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/packages/caddy-http-server/" title="Caddy HTTP server" class="dd-item ">
        <a href="/packages/caddy-http-server/">
        Caddy HTTP server
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/packages/minio/" title="MinIO object storage" class="dd-item ">
        <a href="/packages/minio/">
        MinIO object storage
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/packages/docker-containers/" title="Docker containers" class="dd-item ">
        <a href="/packages/docker-containers/">
        Docker containers
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/development/" title="Package development" class="dd-item
        parent
        
        
        ">
      <a href="/development/">
          <b>5. </b>Package development
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/development/process-interface/" title="Process interface / requirements" class="dd-item ">
        <a href="/development/process-interface/">
        Process interface / requirements
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/development/gpio/" title="Controlling a GPIO input/output pin" class="dd-item ">
        <a href="/development/gpio/">
        Input/output via GPIO pins
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/development/modules/" title="Working with Go modules" class="dd-item ">
        <a href="/development/modules/">
        Working with Go modules
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/development/non-go/" title="Non-Go Prototyping" class="dd-item active">
        <a href="/development/non-go/">
        Non-Go Prototyping
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/gokrazy/gokrazy"><i class='fab fa-github'></i> GitHub repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/gokrazy/gokrazy/tree/master/website/content/development/non-go.markdown" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>gokrazy</a> > <a href='/development/'>Package development</a> > Non-Go Prototyping
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#go-software-not-written-for-gokrazy-grafana">Go software not written for gokrazy: Grafana</a></li>
    <li><a href="#c-software-wireguard">C software: WireGuard</a></li>
    <li><a href="#c-software-tc">C software: tc</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Non-Go Prototyping
            </h1>
          

        


<p>To realize the full benefits of gokrazy, you need to use only
software written in Go. If there is no Go software for what you want
to do, creating that piece of software can pose a seemingly
unsurmountable hurdle. To make some quick progress and figure out if
your idea can be implemented, it might make sense to temporarily use
existing software before starting your own implementation.</p>
<p>This article shows a couple of techniques for getting non-Go
software to work on gokrazy, in increasing order of complexity.</p>
<p>Note that software which is manually installed like shown
here <strong>will not be automatically updated</strong> by gokrazy
and hence poses a security risk. Use these techniques only for
prototyping.</p>
<h2 id="go-software-not-written-for-gokrazy-grafana">Go software not written for gokrazy: Grafana</h2>
<p>It would not suffice to add Grafana to your <code>gokr-packer</code>
command, as the resulting Grafana binary requires assets, supports
plugins, keeps state, etc.</p>
<p>Hence, you need to manually install Grafana into a directory
underneath <code>/perm</code>. A convenient way to do that is to
use <a href="https://github.com/gokrazy/breakglass">breakglass</a>
to download the “Standalone Linux Binaries” release from
<a href="https://grafana.com/grafana/download?platform=arm"><a href="https://grafana.com/grafana/download?platform=arm">https://grafana.com/grafana/download?platform=arm</a></a>. Note
that I am serving the file from my computer because my busybox
version supports neither HTTPS nor DNS.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/tmp/breakglass531810560 # wget http://10.0.0.76:4080/grafana-5.3.2.linux-arm64.tar.gz
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560 # tar xf grafana-5.3.2.linux-arm64.tar.gz
</span></span></code></pre></div><p>We cannot start Grafana yet, as its binary is dynamically
linked. One way to fix this is to place the sources which correspond
to the release you just unpacked (e.g. from
<a href="https://github.com/grafana/grafana/tree/v5.3.2"><a href="https://github.com/grafana/grafana/tree/v5.3.2">https://github.com/grafana/grafana/tree/v5.3.2</a></a>)
in your <code>$GOPATH</code> and recompile the binaries:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>GOARCH<span style="color:#f92672">=</span>arm64 CGO_ENABLED<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> CC<span style="color:#f92672">=</span>aarch64-linux-gnu-gcc go install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -ldflags <span style="color:#e6db74">&#34;-linkmode external -extldflags -static&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  github.com/grafana/grafana/pkg/cmd/...
</span></span></code></pre></div><p>Note that it is usually easier to set the environment
variable <code>CGO_ENABLED=0</code> to get a statically linked
binary, but Grafana uses sqlite3, which is written in C, so we
resort to the <code>-ldflags</code> variant.</p>
<p>At this point, we can start Grafana from breakglass:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/tmp/breakglass531810560 # cd grafana-5.3.2
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560/grafana-5.3.2 # wget http://10.0.0.76:4080/grafana-server
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560/grafana-5.3.2 # install -m 755 grafana-server bin/ &amp;&amp; rm grafana-server
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560/grafana-5.3.2 # ./bin/grafana-server
</span></span><span style="display:flex;"><span>INFO[10-30|19:27:51] Starting Grafana                         logger=server version=5.0.0 commit=NA compiled=2018-10-30T19:27:51+0100
</span></span><span style="display:flex;"><span>…
</span></span></code></pre></div><p>To have gokrazy start Grafana, we can use a Go package like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;log&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;syscall&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bin</span> = <span style="color:#e6db74">&#34;/perm/grafana/bin/grafana-server&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">syscall</span>.<span style="color:#a6e22e">Exec</span>(<span style="color:#a6e22e">bin</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#a6e22e">bin</span>, <span style="color:#e6db74">&#34;-homepath=/perm/grafana&#34;</span>}, <span style="color:#66d9ef">nil</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="c-software-wireguard">C software: WireGuard</h2>
<p>WireGuard is a modern VPN tunnel, which consists of a Linux kernel
module and a configuration
tool. See <a href="https://github.com/rtr7/kernel/commit/c7afbc1fd2efdb9e1149d271c4d2be59cc5c98f4">rtr7/kernel@c7afbc1f</a>
for how the kernel module was added to the router7 kernel.</p>
<p>The configuration tool can be statically cross-compiled. We can run
Debian in a Docker container to not mess with our host system:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>% mkdir /tmp/wg
</span></span><span style="display:flex;"><span>% cd /tmp/wg
</span></span><span style="display:flex;"><span>% docker run -t -i debian
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# dpkg --add-architecture arm64
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# apt update
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# apt install libmnl-dev:arm64 libelf-dev:arm64 linux-headers-amd64 crossbuild-essential-arm64 pkg-config wget
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# wget https://git.zx2c4.com/WireGuard/snapshot/WireGuard-0.0.20181018.tar.xz
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# tar xf WireGuard-0.0.20181018.tar.xz
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# cd WireGuard-0.0.20181018/src/tools
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# make CC=aarch64-linux-gnu-gcc LDFLAGS=-static
</span></span><span style="display:flex;"><span>root@d1728eaaa6e1:/# exit
</span></span><span style="display:flex;"><span>% docker cp -L d1728eaaa6e1:/WireGuard-0.0.20181018/src/tools/wg .
</span></span></code></pre></div><p>Now we can copy and run the <code>wg</code> binary via breakglass:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/tmp/breakglass531810560 # wget http://10.0.0.76:4080/wg
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560 # chmod +x wg
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560 # ./wg --help
</span></span><span style="display:flex;"><span>Usage: ./wg &lt;cmd&gt; [&lt;args&gt;]
</span></span><span style="display:flex;"><span>…
</span></span></code></pre></div><h2 id="c-software-tc">C software: tc</h2>
<p>Linux’s Traffic Control system (used e.g. for traffic shaping) is
configured with the <code>tc</code> tool.</p>
<p><code>tc</code> is a special case in that it requires to be
dynamically linked. The different queueing disciplines are
implemented as plugins, and statically linking <code>tc</code>
results in a binary which starts but won’t be able to display or
change queueing disciplines.</p>
<p>Because gokrazy doesn’t include a C runtime environment, we’ll need to copy not
only the <code>tc</code> binary, but also the dynamic loader and all required
shared libraries. We can run Debian in a Docker container to not mess with our
host system, and use the <a
href="https://github.com/gokrazy/freeze"><code>freeze</code> tool</a> to
automate the tedious parts of the process:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>% mkdir /tmp/iproute
</span></span><span style="display:flex;"><span>% cd /tmp/iproute
</span></span><span style="display:flex;"><span>% docker run -t -i debian:bookworm
</span></span><span style="display:flex;"><span>root@6e530a973d45:/# dpkg --add-architecture arm64
</span></span><span style="display:flex;"><span>root@6e530a973d45:/# apt update
</span></span><span style="display:flex;"><span>root@6e530a973d45:/# apt install iproute2:arm64 qemu-user-static golang-go ca-certificates
</span></span><span style="display:flex;"><span>root@6e530a973d45:/# go install github.com/gokrazy/freeze/cmd/...@latest
</span></span><span style="display:flex;"><span>root@6e530a973d45:/# ~/go/bin/freeze -wrap=qemu-aarch64-static $(which tc)
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 /sbin/tc
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 Copying tc together with its 12 ELF shared library dependencies
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /sbin/tc /tmp/freeze2237965672/tc]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /usr/lib/aarch64-linux-gnu/libbpf.so.0.7.0 /tmp/freeze2237965672/libbpf.so.0]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /usr/lib/aarch64-linux-gnu/libelf-0.186.so /tmp/freeze2237965672/libelf.so.1]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /usr/lib/aarch64-linux-gnu/libmnl.so.0.2.0 /tmp/freeze2237965672/libmnl.so.0]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /usr/lib/aarch64-linux-gnu/libbsd.so.0.11.5 /tmp/freeze2237965672/libbsd.so.0]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /lib/aarch64-linux-gnu/libcap.so.2.44 /tmp/freeze2237965672/libcap.so.2]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /lib/aarch64-linux-gnu/libm-2.33.so /tmp/freeze2237965672/libm.so.6]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /lib/aarch64-linux-gnu/libdl-2.33.so /tmp/freeze2237965672/libdl.so.2]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /usr/lib/aarch64-linux-gnu/libxtables.so.12.4.0 /tmp/freeze2237965672/libxtables.so.12]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /lib/aarch64-linux-gnu/libc-2.33.so /tmp/freeze2237965672/libc.so.6]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /lib/aarch64-linux-gnu/ld-2.33.so /tmp/freeze2237965672/ld-linux-aarch64.so.1]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /lib/aarch64-linux-gnu/libz.so.1.2.11 /tmp/freeze2237965672/libz.so.1]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [cp /usr/lib/aarch64-linux-gnu/libmd.so.0.0.5 /tmp/freeze2237965672/libmd.so.0]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 [tar cf /tmp/freeze2237965672.tar freeze2237965672]
</span></span><span style="display:flex;"><span>2022/03/20 11:45:46 Download freeze2237965672.tar to your gokrazy device and run:
</span></span><span style="display:flex;"><span>	LD_LIBRARY_PATH=$PWD ./ld-linux-aarch64.so.1 ./tc
</span></span><span style="display:flex;"><span>root@6e530a973d45:/# exit
</span></span><span style="display:flex;"><span>% mkdir /tmp/freeze
</span></span><span style="display:flex;"><span>% cd /tmp/freeze
</span></span><span style="display:flex;"><span>% docker cp 6e530a973d45:/tmp/freeze2237965672.tar .
</span></span><span style="display:flex;"><span>% caddy file-server -listen=:4080
</span></span></code></pre></div><p>Now we can copy the contents of the temporary directory to
e.g. <code>/perm/tc</code> and run the <code>tc</code> command in
breakglass:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/tmp/breakglass531810560 # wget -O- http://10.0.0.76:4080/freeze2237965672.tar | tar xf -
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560 # cd freeze2237965672
</span></span><span style="display:flex;"><span>/tmp/breakglass531810560/freeze2237965672 # LD_LIBRARY_PATH=$PWD ./ld-linux-aarch64.so.1 ./tc
</span></span><span style="display:flex;"><span>Usage: tc [ OPTIONS ] OBJECT { COMMAND | help }
</span></span><span style="display:flex;"><span>…
</span></span></code></pre></div>

<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1650998234"></script>
    <script src="/js/perfect-scrollbar.min.js?1650998234"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1650998234"></script>
    <script src="/js/jquery.sticky.js?1650998234"></script>
    <script src="/js/featherlight.min.js?1650998234"></script>
    <script src="/js/highlight.pack.js?1650998234"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1650998234"></script>
    <script src="/js/learn.js?1650998234"></script>
    <script src="/js/hugo-learn.js?1650998234"></script>
    
        
            <script src="/mermaid/mermaid.js?1650998234"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

